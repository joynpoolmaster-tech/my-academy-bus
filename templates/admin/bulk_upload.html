<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 - 회원 일괄 등록</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .admin-sidebar-bg { background-color: #F0F9FF; }
        .admin-header-bg { background-color: #E0F2FE; }
    </style>
</head>
<body class="bg-gray-100 flex">

    <!-- 사이드바 -->
    <div class="admin-sidebar-bg w-64 min-h-screen p-4 hidden md:block">
        <div class="text-2xl font-bold text-blue-800 mb-8">배차 관리 시스템</div>
        <nav class="space-y-2">
            <a href="#" class="flex items-center p-3 text-gray-700 hover:bg-blue-100 rounded-lg">대시보드</a>
            <a href="{{ url_for('manage_students') }}" class="flex items-center p-3 text-gray-700 hover:bg-blue-100 rounded-lg">회원 관리</a>
            <a href="{{ url_for('manage_classes') }}" class="flex items-center p-3 text-gray-700 hover:bg-blue-100 rounded-lg">클래스 관리</a>
            <a href="{{ url_for('manage_vehicles') }}" class="flex items-center p-3 text-gray-700 hover:bg-blue-100 rounded-lg">기사/차량 관리</a>
            <a href="{{ url_for('manage_dispatch') }}" class="flex items-center p-3 text-gray-700 hover:bg-blue-100 rounded-lg">배차 관리</a>
            <a href="{{ url_for('bulk_upload') }}" class="flex items-center p-3 text-blue-900 bg-blue-200 rounded-lg font-bold">일괄 등록</a>
        </nav>
    </div>

    <!-- 메인 컨텐츠 -->
    <div class="flex-1 flex flex-col">
        <header class="admin-header-bg p-4 flex justify-between items-center shadow-md">
            <h2 class="text-xl font-bold text-blue-800">회원 일괄 등록</h2>
            <div>
                <span class="mr-4">관리자님</span>
                <a href="#" class="bg-white text-blue-600 px-4 py-2 rounded-lg shadow hover:bg-gray-100">로그아웃</a>
            </div>
        </header>
        
        <main class="flex-1 p-6">
            <!-- Flash 메시지 표시 -->
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="mb-4 p-4 rounded-md 
                    {% if category == 'success' %} bg-green-100 text-green-700 
                    {% elif category == 'danger' %} bg-red-100 text-red-700 
                    {% else %} bg-blue-100 text-blue-700 {% endif %}"
                    role="alert">
                    {{ message | safe }}
                  </div>
                {% endfor %}
              {% endif %}
            {% endwith %}

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- 1. 양식 준비 -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-lg mb-2">1. 양식 준비하기</h3>
                    <p class="text-sm text-gray-600 mb-4">
                        기존 회원 명부를 시스템에 등록하기 위한 양식을 준비합니다. 엑셀 또는 구글 시트 중 편한 방법을 선택하세요.
                    </p>
                    <div class="flex space-x-4">
                        <a href="{{ url_for('download_template') }}" class="flex-1 text-center bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700 transition duration-300">엑셀 양식 다운로드</a>
                        <a href="{{ url_for('create_gspread_template') }}" class="flex-1 text-center bg-yellow-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-yellow-600 transition duration-300">구글 시트 양식 생성</a>
                    </div>
                </div>

                <!-- 2. 파일 업로드 -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="font-bold text-lg mb-2">2. 명부 파일 업로드</h3>
                    <p class="text-sm text-gray-600 mb-4">
                        양식에 맞춰 작성한 엑셀(.xlsx) 또는 CSV(.csv) 파일을 업로드해주세요.
                    </p>
                    <form method="POST" action="{{ url_for('upload_file') }}" enctype="multipart/form-data">
                        <input type="file" name="file" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" required>
                        <button type="submit" class="mt-4 w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition duration-300">업로드 및 등록 실행</button>
                    </form>
                </div>
            </div>
        </main>
    </div>

</body>
</html>
